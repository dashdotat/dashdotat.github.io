<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	
	<meta charset="utf-8" />
	<title>attachment</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	
	<link rel="stylesheet" href="../../../style.css" type="text/css" />
	
	<link rel="stylesheet" href="../../../local.css" type="text/css" />
	

	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.3/css/bootstrap.min.css" integrity="sha384-MIwDKRSSImVFAZCVLtU0LMDdON6KVCrZHyVQQj6e8wIEJkW4tvwqXrbMIya1vriY" crossorigin="anonymous" type="text/css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous" type="text/css" />
	
	
	
	
	
	
	<meta name="robots" content="noindex, follow" />
	
	
</head>

<body>
	<div id="notfooter">
		<div id="header">
		<header class="navbar navbar-dark bg-inverse navbar-full">
			<div class="container">
				<button type="button" class="navbar-toggler hidden-sm-up pull-xs-right" data-toggle="collapse" data-target="#header-nav">&#9776;</button>

				<ul class="nav navbar-nav">
					
					<li class="nav-item "><a class="nav-link" href="../../../">dashdotat</a></li>
					
					<li class="nav-item hidden-md-down"><a class="nav-link" href="../../">ikiwiki</a></li>
					
					<li class="nav-item hidden-md-down"><a class="nav-link" href="../">pagespec</a></li>
					
					<li class="nav-item"><a class="nav-link active hidden-md-down" href="#">attachment</a></li>
				</ul>

				<div class="collapse navbar-toggleable-xs" id="header-nav">
					
					
					

					

					

					
					
					
				</div>
			</div>
		</header>
		</div>

		<div class="container">
			
			
			

			<main id="content">
				<p>This wiki has attachments <strong>disabled</strong>.</p>

<p>If attachments are enabled, the wiki admin can control what types of
attachments will be accepted, via the <code>allowed_attachments</code>
configuration setting.</p>

<p>For example, to limit most users to uploading small images, and nothing else,
while allowing larger mp3 files to be uploaded by joey into a specific
directory, and check all attachments for viruses, something like this could be
used:</p>

<pre><code>virusfree() and ((user(joey) and podcast/*.mp3 and mimetype(audio/mpeg) and maxsize(15mb)) or (mimetype(image/*) and maxsize(50kb)))
</code></pre>

<p>The regular <a href="../">PageSpec</a> syntax is expanded with the following
additional tests:</p>

<ul>
<li><p>"<code>maxsize(size)</code>" - tests whether the attachment is no larger than the
specified size. The size defaults to being in bytes, but "kb", "mb", "gb"
etc can be used to specify the units.</p></li>
<li><p>"<code>minsize(size)</code>" - tests whether the attachment is no smaller than the
specified size.</p></li>
<li><p>"<code>ispage()</code>" - tests whether the attachment will be treated by ikiwiki as a
wiki page. (Ie, if it has an extension of ".mdwn", or of any other enabled
page format).</p>

<p>So, if you don't want to allow wiki pages to be uploaded as attachments,
use <code>!ispage()</code> ; if you only want to allow wiki pages to be uploaded
as attachments, use <code>ispage()</code>.</p></li>
<li><p>"<code>mimetype(foo/bar)</code>" - checks the MIME type of the attachment. You can
include a glob in the type, for example <code>mimetype(image/*)</code>.</p></li>
<li><p>"<code>virusfree()</code>" - checks the attachment with an antiviral program.</p></li>
</ul>


			</main>

			

			
			
			

			
			
			
		</div>
	</div>

	<footer id="footer" class="container">
		
		<nav id="pageinfo">
			
			

			

			

			

			<span id="pagedate">
				Last edited <time datetime="2016-10-28T11:01:48Z">Fri 28 Oct 2016 01:01:48 PM CEST</time>.
			</span>
		</nav>
		
		
	</footer>
</body>
</html>
